<!-- pages/tabbar/shoplist/shoplist.wxml -->
<view>
    <header navbar-data='{{nvabarData}}' />
    <view class="container" style="padding-top:{{occupation}}px;">
        <view class="tabbar">
            <view wx:for="{{status}}" wx:key="{{index}}" data-status="{{item.value}}" bind:tap="switchStatus">
                <text class="{{selected==item.value?'active':''}}">{{item.text}}</text>
            </view>
        </view>
        <view class="empty" wx:if="{{list.length==0}}">
            <image src="/static/images/dingdan.png" />
            暂无相关订单
        </view>
        <view class="order" wx:for="{{list}}" wx:key="{{index}}">
            <view class="top">
                <text class="orderNo">订单号：{{item.item_num}}</text>
                <text class="status">{{item.status}}</text>
            </view>
            <navigator class="goods" hover-class="none" url="/pages/user/orders/order/order?id={{item.item_id}}">
                <view class="middle" wx:for="{{item.goods}}" wx:key="{{index}}" wx:for-item="goods">
                    <image src="{{goods.goods_info.thumb_image}}"/>
                    <view>
                        <view class="name">{{goods.goods_info.title}}</view>
                        <view class="unit">
                            {{goods.goods_info.specification}}
                            <text class="num">x{{goods.num}}</text>
                        </view>
                        <view class="price"><text class="_rmb">￥</text>{{goods.price}}</view>
                    </view>
                </view>
            </navigator>
            <!-- 待付款 -->
            <view class="bottom status0" wx:if="{{item.order_status==0}}">
                <text class="button solid" data-id="{{item.order_id}}" bind:tap="payOrder">去支付</text>
                <text class="button" data-id="{{item.item_id}}" bind:tap="cancelOrder">取消订单</text>
                <text class="total">实付:<text class="price"><text class="_rmb">￥</text>{{item.price}}</text></text>
            </view>
            <!-- 已付款 -->
            <view class="bottom status1" wx:if="{{item.order_status==1}}">
                <text class="total">实付:<text class="price"><text class="_rmb">￥</text>{{item.price}}</text></text>
            </view>
            <!-- 已发货 -->
            <view class="bottom status2" wx:if="{{item.order_status==2}}">
                <text class="button solid" data-id="{{item.item_id}}">确认收货</text>
                <text class="button" data-id="{{item.item_id}}">查看物流</text>
                <text class="total">实付:<text class="price"><text class="_rmb">￥</text>{{item.price}}</text></text>
            </view>
            <!-- 完成 -->
            <view class="bottom status3" wx:if="{{item.order_status==3}}">
                <text class="button solid" data-id="{{item.item_id}}">评价</text>
                 <text class="button" data-id="{{item.item_id}}">查看物流</text>
                 <text class="button" data-id="{{item.item_id}}" bind:tap="deleteOrder">删除订单</text>
                <text class="total">实付:<text class="price"><text class="_rmb">￥</text>{{item.price}}</text></text>
            </view>
        </view>
    </view>
</view>